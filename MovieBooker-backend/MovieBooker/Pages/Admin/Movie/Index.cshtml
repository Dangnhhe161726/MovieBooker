@page
@model MovieManagerModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@using MovieBooker.Dtos
@{
	ViewData["Title"] = "Manager movie";
	Layout = "_AdminLayout";
}

<style>
	.table th img, .table td img {
		width: 100px;
		height: 100px;
		border-radius: 10%;
	}

	.table {
		text-align: center;
	}
</style>

<div class="content-wrapper">
	<div class="row">
		<div class="col-12 grid-margin">
			<div class="card">
				<div class="card-body">
					@* <h4 class="card-title">Recent Tickets</h4> *@
					<div class="table-responsive">
						<table class="table">
							<thead>
								<tr>
									<th> ID </th>
									<th> Image </th>
									<th> Title </th>
									<th> Price </th>
									<th> Release Date </th>
									<th> Status </th>
									<th> Action </th>
								</tr>
							</thead>
							<tbody>
								@foreach (var item in Model.moives)
								{
									<tr>
										<td>
											@item.MovieId
										</td>
										<td>
											<img src="@item.MovieImages.First().LinkImage" alt="image">
										</td>
										<td>
											@item.MovieTitle
										</td>
										<td>
											@item.Price VND
										</td>
										<td>
											@item.ReleaseDate?.ToString("dd/MM/yyyy")
										</td>
										<td>
											@switch (item.StatusId)
											{
												case 1:
													<label class="badge badge-gradient-info">@item.Status.StatusName</label>
													break;
												case 2:
													<label class="badge badge-gradient-success">@item.Status.StatusName</label>
													break;
												case 3:
													<label class="badge badge-gradient-danger">@item.Status.StatusName</label>
													break;
											}
										</td>
										<td>
											@if (item.Enable == true)
											{
												<form action="/admin/movie/delete" method="post">
													<input type="hidden" name="id" value="@item.MovieId" />
													<button type="submit" style="background: none; border: none; padding: 0; cursor: pointer;">
														<i class="fa fa-eye" style="font-size: 20px; color: #b66dff"></i>
													</button>
												</form>
											}
											else
											{
												<form action="/admin/movie/delete" method="post">
													<input type="hidden" name="id" value="@item.MovieId" />
													<button type="submit" style="background: none; border: none; padding: 0; cursor: pointer;">
														<i class="fa fa-eye-slash" style="font-size: 20px;  color: #b66dff"></i>
													</button>
												</form>
											}
											<br />

											<a asp-page="/admin/movie/edit" asp-route-id="@item.MovieId">
												<i class="fa fa-pencil" style="margin-top: 10px; font-size: 20px; color: #b66dff"></i>
											</a>
										</td>
									</tr>
								}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
